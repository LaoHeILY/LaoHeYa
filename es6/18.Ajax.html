<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <div id="div1">未请求</div>
    <button id='btn'>click</button>
    <h2>jajaja</h2>
    <p>ijdjksdok</p>
    <script>
    // setTimeout(function(){
    //     console.log('hahah')
    // },2000);
    // console.log('hehehe');
    //ajax原理
    //1.创建一个XMLHttpRequest对象
    var oBtn = document.getElementById('btn')
    oBtn.onclick = function(){
        var  xmlhttp;
    if(window.XMLHttpRequest){
        xmlhttp = new XMLHttpRequest();
    }
    else{
        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
    }
    //2.AJAX - 向服务器发送请求

    xmlhttp.open("GET","test.json",true);
    //get 请求方式 数据量小 在地址栏中  post数据量大
    //test1.txt  请求地址 后台
    //true 是异步获取  false 同步
    xmlhttp.send();//发送请求


    //3，服务器相应
   
    xmlhttp.onreadystatechange=function(){
     if (xmlhttp.readyState==4 && xmlhttp.status==200) {
    //  document.getElementById("myDiv").innerHTML=xmlhttp.responseText;
     console.log(xmlhttp.responseText)//服务端返回数据   xmlhttp.responseText 
      var oDiv = document.getElementById('div1');
      //JSON.parse 将json格式转成对象 服务器返回的是JSON格式
      var obj = JSON.parse(xmlhttp.responseText);
     oDiv.innerHTML = obj.msg;
    }
}
 //readyState存有 XMLHttpRequest 的状态。从 0 到 4 发生变化。
// 0: 请求未初始化
// 1: 服务器连接已建立
// 2: 请求已接收
// 3: 请求处理中
// 4: 请求已完成，且响应已就绪

//status状态码
//202 成功
//304 缓存
//404 地址找不到
//505 服务器错误
    }
    
    
    
    </script>
</body>
</html>